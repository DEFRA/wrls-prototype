{% extends "layout.html" %}

{% set title = "Check charge version details" %}

{% block pageTitle %}
  {{title}} - GOV.UK
{% endblock %}

{% block header %}
 {{ govukHeader({
   homepageUrl: "/",
   serviceName: "Manage your water abstraction or impoundment licence",
   serviceUrl: "#",
   containerClasses: "govuk-width-container",
   navigation: [
     {
       href: "#1",
       text: "Change password"
     },
     {
       href: "/",
       text: "Sign out"
     }
   ]
 }) }}
{% endblock %}

{% block beforeContent %}

  <div class="govuk-!-margin-bottom-3">
    <!-- navigation block -->
    {% include "includes/nav/nav-bd-view.html" %}
  </div>

  {{ govukBackLink({
    text: "Back",
    href: "javascript:history.back()"
  }) }}

{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <!-- page heading -->
      <span class="govuk-caption-l">Licence 03/28/60/0032</span>
    <h1 class="govuk-heading-l">{{title}}</h1>

    </div>
  </div>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

  <form action="charge-data-confirmation" method="post" class="form" id="return-reference-error">

    <section class="govuk-!-margin-bottom-6">
    <h2 class="govuk-heading-m govuk-!-margin-bottom-0">Agreements</h2>

    {% set monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] %}

    {% set monthNumber = data['agreementStart-month'] %}

    {% set month = monthNames[monthNumber - 1] %}

    {% set agreementStart = data['agreementStart-day'] + " " + month +" "+ data['agreementStart-year']%}

    {% if [data.agreement] == "No agreements"%}
    {{ govukSummaryList({
    rows: [
      {
        key: {
          text: "Agreement"
        },
        value: {
          text: [data.agreement]
        },
        actions: {
          items: [
            {
              href: "create-agreement",
              text: "Change",
              visuallyHiddenText: "name"
            }
          ]
        }
      }


    ]
  }) }}
     {% else %}
    {{ govukSummaryList({
    rows: [
      {
        key: {
          text: "Agreement"
        },
        value: {
          text: [data.agreement]
        },
        actions: {
          items: [
            {
              href: "add-agreement",
              text: "Change",
              visuallyHiddenText: "name"
            }
          ]
        }
      },
      {
        key: {
          text: "Start date"
        },
        value: {
          text: [agreementStart]
        },
        actions: {
          items: [
            {
              href: "add-agreement-date",
              text: "Change",
              visuallyHiddenText: "name"
            }
          ]
        }
      }


    ]
  }) }}

  {% endif %}
 </section>


 <section class="govuk-!-margin-bottom-6">

   <h2 class="govuk-heading-m govuk-!-margin-bottom-0">Element</h2>
       {{ govukSummaryList({
         classes: "govuk-!-margin-bottom-9",
       rows: [
         {
           key: {
             text: "Purpose"
           },
           value: {
             text: [data.purpose]
           },
           actions: {
             items: [
               {
                 href: "change-purpose",
                 text: "Change",
                 visuallyHiddenText: "name"
               }
             ]
           }
         },

         {
            key: {
              text: "Description"
            },
            value: {
              text: [data.chargeDescription]
            },
            actions: {
              items: [
                {
                  href: "change-purpose",
                  text: "Change",
                  visuallyHiddenText: "name"
                }
              ]
            }
          },


         {
           key: {
             text: "Abstraction period"
           },
           value: {
             text: [data.abstractionPeriod]
           },
           actions: {
             items: [
               {
                 href: "add-agreement-date",
                 text: "Change",
                 visuallyHiddenText: "name"
               }
             ]
           }
         },
         {
           key: {
             text: "Billable quantity"
           },
           value: {
             text: [data.billableQuantity]
           },
           actions: {
             items: [
               {
                 href: "add-agreement-date",
                 text: "Change",
                 visuallyHiddenText: "name"
               }
             ]
           }
         },
         {
           key: {
             text: "Authorised quantity"
           },
           value: {
             text: [data.authorisedQuantity]
           },
           actions: {
             items: [
               {
                 href: "add-agreement-date",
                 text: "Change",
                 visuallyHiddenText: "name"
               }
             ]
           }
         },
         {
           key: {
             text: "Time limit"
           },
           value: {
             text: [data.timeLimit]
           },
           actions: {
             items: [
               {
                 href: "add-agreement-date",
                 text: "Change",
                 visuallyHiddenText: "name"
               }
             ]
           }
         },
         {
           key: {
             text: "Source"
           },
           value: {
             text: [data.source]
           },
           actions: {
             items: [
               {
                 href: "add-agreement-date",
                 text: "Change",
                 visuallyHiddenText: "name"
               }
             ]
           }
         },
         {
           key: {
             text: "Season"
           },
           value: {
             text: [data.season]
           },
           actions: {
             items: [
               {
                 href: "add-agreement-date",
                 text: "Change",
                 visuallyHiddenText: "name"
               }
             ]
           }
         },
         {
           key: {
             text: "Loss"
           },
           value: {
             text: [data.loss]
           },
           actions: {
             items: [
               {
                 href: "add-agreement-date",
                 text: "Change",
                 visuallyHiddenText: "name"
               }
             ]
           }
         }


       ]
     }) }}


</section>
 <section class="govuk-!-margin-bottom-6">

   <h2 class="govuk-heading-m govuk-!-margin-bottom-0">Billing contact</h2>

   {% set monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] %}

   {% set monthNumber = data['startMonth'] %}

   {% set month = monthNames[monthNumber - 1] %}

   {% set effectiveDate = data['startDay'] + " " + month +" "+ data['startYear']%}

   {% set invoiceAddress %}
   {{ data.invoiceAccount}} <br>
   {{ data.address1}} <br>
   {{ data.city}} <br>
   {{data.postcode}} <br>
   {% endset %}


       {{ govukSummaryList({
           classes: 'govuk-!-margin-bottom-9',
           rows:
           [
             {
               key: {
                 text: "Name"
               },
               value: {
                 text: [data.customerName]
               },
               actions: {
                 items: [
                   {
                     href: "#",
                     text: "Change",
                     visuallyHiddenText: "name"
                   }
                 ]
               }
             },
             {
               key: {
                 text: "Billing account"
               },
               value: {
                 html: invoiceAddress
               },
               actions: {
                 items: [
                   {
                     href: "#",
                     text: "Change",
                     visuallyHiddenText: "address"
                   }
                 ]
               }
             },
             {
               classes: 'govuk-summary-list__row--last',
               key: {
                 text: "Effective from"
               },
               value: {
                 text: [effectiveDate]
               },
               actions: {
                 items: [
                   {
                     href: "#",
                     text: "Change",
                     visuallyHiddenText: "effective date"
                   }
                 ]
               }
             }
           ]
         }) }}

  </section>

  <section class="govuk-!-margin-bottom-6">

    <h2 class="govuk-heading-m govuk-!-margin-bottom-0">Charge start date</h2>

  {% set monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] %}

  {% set monthNumber = data['chargeStart-month'] %}

  {% set month = monthNames[monthNumber - 1] %}

  {% set chargeStart = data['chargeStart-day'] + " " + month +" "+ data['chargeStart-year']%}


  {{ govukSummaryList({
  rows: [
    {
      key: {
        text: "Start date"
      },
      value: {
        text: [chargeStart]
      },
      actions: {
        items: [
          {
            href: "add-agreement",
            text: "Change",
            visuallyHiddenText: "name"
          }
        ]
      }
    }
  ]
}) }}

</section>


{{ govukButton({
text: "Confirm"
}) }}



  </form>

</div>
</div>



{% endblock %}
